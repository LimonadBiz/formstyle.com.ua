---
title: другие способы заполнения областей Фоновым изображением
author: admin
type: post
date: 2013-01-01T17:18:05+00:00
url: /drugie-sposoby-zapolneniya-oblastej-fonovym-izobrazheniem/
categories:
  - Css 3

---
Свойство background-size позволяет задать такой уровень масштабирования, чтобы размер изображения в точности совпал с размером поля. Однако избежать обрезки фонового изображения по краям можно и другими способами, например с помощью значений round или space свойства background-repeat. Эти значения впервые появились в спецификации CSS3; их можно применять как в сочетании с background-repeat, так и отдельно.

Когда используется параметр round, фон заполняется копиями изображения, и они масштабируются таким образом, чтобы избежать обрезки, — в поле помещается целое число копий. В случае параметра space фоновое изображение повторяется максимальное число раз без обрезки, а затем копии равномерно распределяются по фону за счет увеличения промежутков между ними.

К сожалению, на момент написания этой главы указанные значения поддерживаются только в IE 9 и Opera, причем в Opera — не полностью и неправильно. До тех пор пока поддержка значений background-repeat не будет реализована на достаточно высоком уровне, я рекомендую использовать только background-size. Пусть оно и проигрывает в гибкости, тем не менее оно вполне успешно позволяет заполнить фон копиями изображения и избежать обрезки.

Масштабирование линий вместе с текстом

Для того чтобы наш фон с линованной бумагой масштабировался вместе с текстом, его размеры нужно задать не в процентах или пикселах, а в em. Em — это относительная единица измерения, зависящая от текущей высоты шрифта.

Для начала загрузите файлы упражнений с веб-сайта http://www.stunningcss3.com и откройте файл paper_start.html в любом удобном для вас редакторе кода. Код CSS содержится внутри элемента style в теге head данной страницы.

Найдите в коде CSS правило #paper и добавьте к нему свойство background-size вместе с эквивалентами для Mozilla и Webkit:

#paper {

float: left; margin: 40px;

padding: 3.2em 1.6em 1.6em 1.6em; background: url(images/paperlines.gif) #FBFBF9;

-moz-background-size: auto 1.6em;

-webkit-background-size: auto 1.6em; background-size: auto 1.6em;

}

В Opera, Chrome, Safari 5, Firefox 4 и IE 9 используется стандартное свойство background-size; в Firefox 3.6 и Safari 4 считываются версии с префиксами -moz-и -webkit-, соответственно. В каждой из версий свойства мы сообщаем браузеру, что высота изображения должна составлять 1,6 em, а по ширине оно должно масштабироваться пропорционально. Само изображение содержит кусочек бумаги с одной только линией; таким образом, расстояние между каждой парой линий на странице будет составлять 1,6 em. Почему именно 1,6 em? Высота каждой строки текста 1,6 em, и это указано в свойстве line-height внутри элемента body:

body {

margin: 0; padding: 40px;

background: #CCC url(images/background.gif); color: #333; font-size: 87.5%;

font-family: Georgia, &#171;Times New Roman&#187;, Times, serif; line-height: 1.6;

<sup>}</sup>

На рис. 3.6 видно, что размер фонового изображения действительно поменялся, однако текст почему-то все так же не выровнен по строкам. Причина заключается в том, что не все размеры текста и полей кратны нашему стандартному межстрочному расстоянию в 1,6 em. Обычный текст абзацев и списки выровнены правильно: для этих элементов значение line-height и размер нижнего поля равны 1,6, как видно из кода CSS. Однако поля заголовков необходимо скорректировать, для того чтобы они не выбивались из общей массы. h1 {

margin: -.3em 0 .14em 0;

color: #414141;

font-family: Helvetica, &#171;Helvetica Neue&#187;, Arial,

sans-serif; font-size: 3.5em; font-weight: normal;

<sup>}</sup>

h2 {

clear: left;

color: #414141; margin: 0 0 -.14em 0;

font-family: Helvetica, &#171;Helvetica Neue&#187;, Arial,

&#8212; sans-serif; font-size: 2.17em; font-weight: bold;

<div>
  <p>
    }
  </p>
  
  <div id="attachment_1911" style="width: 779px" class="wp-caption aligncenter">
    <a href="http://formstyle.com.ua/?attachment_id=1911" rel="attachment wp-att-1911"><img class="size-full wp-image-1911" title="После добавления свойства background-size линии фонового изображения располагаются ближе друг к другу" alt="После добавления свойства background-size" src="http://formstyle.com.ua/wp-content/uploads/2012/12/После-добавления-свойства-background-size.png" width="769" height="187" srcset="http://formstyle.com.ua/wp-content/uploads/2012/12/После-добавления-свойства-background-size.png 769w, http://formstyle.com.ua/wp-content/uploads/2012/12/После-добавления-свойства-background-size-300x72.png 300w" sizes="(max-width: 769px) 100vw, 769px" /></a>
    
    <p class="wp-caption-text">
      После добавления свойства background-size линии фонового изображения располагаются ближе друг к другу
    </p>
  </div>
  
  <p>
    Я выбрала значения полей методом проб и ошибок. В отличие от абсолютных размеров, выраженных в пикселах, невозможно подобрать такие относительные значения, чтобы страница смотрелась идеально во всех существующих браузерах: каждый браузер применяет собственный метод округления и преобразования относительных показателей, таких как em, в экранные пикселы. Указанные значения полей подходят для Firefox, Safari и Chrome. Междустрочный интервал везде одинаковый и равен 1,6 em, благодаря чему текст не съезжает с линеечек фоновой бумаги (рис. 3.7).
  </p>
  
  <p style="text-align: center">
    </div> 
    
    <div>
      <a href="http://formstyle.com.ua/?attachment_id=1921" rel="attachment wp-att-1921"><img class="size-full wp-image-1921" title="Теперь текст выровнен по линиям фонового изображения (снимок экрана сделан в браузере Firefox 3.6)" alt="Теперь текст выровнен по линиям фонового изображения" src="http://formstyle.com.ua/wp-content/uploads/2012/12/Теперь-текст-выровнен-по-линиям-фонового-изображения.png" width="588" height="388" srcset="http://formstyle.com.ua/wp-content/uploads/2012/12/Теперь-текст-выровнен-по-линиям-фонового-изображения.png 588w, http://formstyle.com.ua/wp-content/uploads/2012/12/Теперь-текст-выровнен-по-линиям-фонового-изображения-300x197.png 300w" sizes="(max-width: 588px) 100vw, 588px" /></a>
    </div>
    
    <div>
      <p>
        Однако в Opera текст не выровнен, так как Opera немного сильнее уменьшает фоновое изображение. Если бы мы задались целью скорректировать размеры шрифтов и полей в соответствии с особенностями отображения в Opera, в остальных браузерах выравнивание бы сбилось. Оцените статистику посещения вашего сайта и выясните, какие браузеры наиболее значимы для вас и ваших пользователей, а затем подгоните под эти браузеры значения свойств в коде CSS.
      </p>
      
      <p>
        Когда текст выровнен по фоновому изображению, пользователь может устанавливать в своем браузере любой размер текста по умолчанию, увеличивать или уменьшать его, и это не нарушает стройность отображения. Фоновое изображение будет масштабироваться соответствующим образом и строки текста не сползут с нарисованных линий (рис. 3.8). Помимо этого, если вы позже решите поменять базовый размер шрифта в элементе body, то все остальное масштабируется в соответствии с новым значением, и вам не придется переделывать фоновое изображение.
      </p>
      
      <div id="attachment_1931" style="width: 551px" class="wp-caption aligncenter">
        <a href="http://formstyle.com.ua/?attachment_id=1931" rel="attachment wp-att-1931"><img class="size-full wp-image-1931" title="Даже если пользователь выбирает крупный шрифт, текст все так же выравнивается по линиям фонового изображения" alt="Даже если пользователь выбирает крупный шрифт, текст все так же выравнивается по линиям фонового изображения" src="http://formstyle.com.ua/wp-content/uploads/2012/12/Даже-если-пользователь-выбирает-крупный-шрифт-текст-все-так-же-выравнивается-по-линиям-фонового-изображения.png" width="541" height="475" srcset="http://formstyle.com.ua/wp-content/uploads/2012/12/Даже-если-пользователь-выбирает-крупный-шрифт-текст-все-так-же-выравнивается-по-линиям-фонового-изображения.png 541w, http://formstyle.com.ua/wp-content/uploads/2012/12/Даже-если-пользователь-выбирает-крупный-шрифт-текст-все-так-же-выравнивается-по-линиям-фонового-изображения-300x263.png 300w" sizes="(max-width: 541px) 100vw, 541px" /></a>
        
        <p class="wp-caption-text">
          Даже если пользователь выбирает крупный шрифт, текст все так же выравнивается по линиям фонового изображения
        </p>
      </div>
      
      <p>
        Обходные пути для IE
      </p>
      
      <p>
        Свойство background-size не работает в IE 8 и более ранних версиях, и его поведение невозможно имитировать с помощью каких-то простых средств. В данном случае речь идет о незначительном визуальном эффекте, который можно отнести на счет прогрессивного усовершенствования, так что я предлагаю не беспокоиться из-за его отсутствия в IE.
      </p>
      
      <p>
        Сценарий Modernizr, распознающий поддержку свойства background-size, позволяет определять альтернативные стили. Например, с его помощью можно указать совсем другое фоновое изображение или альтернативную версию изображения линованной бумаги, подходящую для шрифта определенного размера в пикселах — причем размер шрифта в пикселах задается только для тех браузеров, которые не поддерживают background-size. Тем не менее я не рекомендую так делать, поскольку пиксельные шрифты плохо влияют на доступность содержимого сайта. И все же в целом Modernizr — неплохой вариант для случая, когда масштабирование фонового изображения с использованием background-size требует добавления альтернативных стилей.
      </p>
      
      <p>
        коротко о свойстве background-size
      </p>
      
      <p>
        Свойство background-size входит в модуль Backgrounds and Borders (Фон и границы), который вы найдете по адресу: http://www.w3.org/TR/css3-background. В качестве значений оно принимает ширину и высоту элемента в любых единицах измерения или же значение auto. Кроме того, свойство background-size распознает значения contain и cover. Оба они заставляют браузер масштабировать изображение с сохранением пропорций. Значение contain масштабирует его до максимального размера, при котором изображение полностью помещается в фоновую область без обрезки по ширине или высоте. Таким образом, несмотря на то что изображение не обрезается, часть фона может оказаться пустой. Со значением cover изображение масштабируется до минимального размера, полностью закрывающего фоновую область, но при этом может быть обрезано по ширине или по высоте, для того чтобы пустых областей не оставалось.
      </p>
      
      <p>
        Помимо масштабирования линеечек на странице и подгона их под междустрочный интервал, свойство background-size можно применять для решения следующих задач:
      </p>
      
      <p>
        •    масштабирование не повторяющегося фона заголовка в «жидком» или эластичном макете, для того чтобы под заголовком никогда не появлялись не заполненные фоновым изображением области;
      </p>
      
      <p>
        • повторение фонового изображения полное число раз — без обрезки по краям поля;
      </p>
      
      <p>
        • растягивание большого фонового изображения, для того чтобы оно всегда занимало страницу целиком (см. http://www.alistapart.com/articles/supersize-that-background-please);
      </p>
      
      <p>
        •    масштабирование фонового изображения, имитирующего столбцы, в «жидком» макете (см. http://www.css3.info/liquid-faux-columns-with-background-size);
      </p>
      
      <p>
        •    масштабирование значка, играющего роль фонового изображения для ссылки или элемента списка, вместе с текстом;
      </p>
      
      <p>
        •    уменьшение фоновых изображений для обладающего высоким разрешением дисплея iPhone 4 вполовину, чтобы при удвоении числа пикселов (как это всегда происходит) изображение не выглядело расплывшимся (см. http://dryan.com/articles/hi-res-mobile-css-iphone-4);
      </p>
      
      <p>
        •    изменение размера фоновых изображений в зависимости от размера окна браузера с использованием медиазапросов, о которых вы узнаете в главе 6.
      </p>
      
      <p>
        . Поддержка свойства background-size в браузерах
      </p>
      
      <table border="1">
        <tr>
          <td>
            IE
          </td>
          
          <td>
            Firefox
          </td>
          
          <td>
            Opera
          </td>
          
          <td>
            Safari
          </td>
          
          <td>
            Chrome
          </td>
        </tr>
        
        <tr>
          <td>
            Да, начиная с версии 9
          </td>
          
          <td>
            Да, начиная с версии 4; в версии 3.6 с префиксом -moz-
          </td>
          
          <td>
            Да
          </td>
          
          <td>
            Да, начиная с версии 5; начиная с версии 3 — с префиксом -webkit-
          </td>
          
          <td>
            Да
          </td>
        </tr>
      </table>
      
      <p>
        &nbsp;
      </p>
    </div>