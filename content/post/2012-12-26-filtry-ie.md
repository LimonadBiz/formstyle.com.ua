---
title: Фильтры IE
author: admin
type: post
date: 2012-12-26T15:54:29+00:00
url: /filtry-ie/
categories:
  - Css 3

---
<div>
  <p>
    После того как эта книга выйдет из типографии, наверняка появятся новые сценарии. Самый полный и актуальный список сценариев эмуляции CSS3 вы найдете на странице http://www.stunningcss3.com/resources.
  </p>
</div>

&nbsp;

Еще один способ имитировать функциональность CSS3, не прибегая к помощи JavaScript, — использовать в коде CSS фильтры Microsoft, позволяющие создавать определенные визуальные эффекты. Разумеется, они работают только в IE и реализуются через фирменные свойства filter или -ms-filter. Синтаксис значения свойства filter частично зависит от того, какой конкретно фильтр вы выбрали, но базовый формат таков: filter: progid:DXImageT ransform.Microsoft.имя\_фильтра(Свойства),где «имя\_филь-тра» — это название фильтра, а «Свойства» — его значение. В версии IE 8 синтаксис обновили — теперь свойство носит название -ms-filter, а его значение необходимо заключать в кавычки. Примеры фильтров вы найдете в главе 2.

Полный список доступных фильтров представлен на странице http://msdn.microsoft. com/en-us/library/ms532853(v=VS.85).aspx, но я хочу отдельно перечислить фильтры, предназначенные для эмуляции эффектов CSS3:

■    фильтры DropShadow, Shadow, Glow и Blur эмулируют свойства box-shadow и text-shadow;

■    фильтр Gradient способен эмулировать RGBA, HSLA и линейные градиенты;

■    фильтры Alpha и BasicImage способны эмулировать свойство opacity;

■    фильтры Matrix и BasicImage используются для эмуляции 2D-трансформаций.

Преимущество фильтров заключается в том, что они работают без добавления сценариев JavaScript и только в IE, т. е. их не нужно специально скрывать от других браузеров, что значительно упрощает применение. Однако не стоит забывать и о недостатках:

■    длина. Для того чтобы написать один фильтр, нужно создать довольно длинную строку, и если в таблице стилей используется много фильтров, это может привести к значительному увеличению размера файла. Справиться с сопутствующими проблемами можно, поместив фильтры в отдельную таблицу стилей. В условных комментариях (о них чуть ниже) укажите, что эта таблица должна загружаться исключительно для браузера IE. Таким образом, тем браузерам, для которых эти фильтры бессмысленны, не придется загружать лишние байты информации;

■    недопустимый код CSS. Если таблица стилей содержит фильтры, она не сможет пройти проверку. В действительности это не проблема, если вы понимаете, почему так происходит. Но если в вашей работе это вызывает сложности, то поместите фильтры в отдельную таблицу стилей только для IE, чтобы по крайней мере основная таблица стилей успешно проходила проверку;

■    производительность. Фильтры могут замедлить загрузку страницы; кроме того, они потребляют много памяти;

■    неровный текст. В Windows фильтры могут отключить визуализацию с использованием ClearType. Без дополнительного сглаживания края символов выглядят неровными;

■    прочие ошибки. Периодически фильтры вызывают появление в IE других ошибок. Например, в главе 2 я покажу вам, как содержимое, сгенерированное с помощью CSS, исчезает из-за наличия в коде фильтров.

Из-за вероятности подобных ошибок я рекомендую применять фильтры только в случае крайней необходимости — и то с осторожностью и не забывая о чувстве меры. И обязательно тщательно тестируйте код с фильтрами.

<a name="bookmark54"></a>Фильтрация IE с использованием условных комментариев

Очень часто бывает так, что обходные пути требуется создавать только для одного браузера — IE версий от 6 до 8. Это означает, что должен существовать какой-то способ передавать правила или сценарии только IE (или скрывать их только от IE), но не остальным браузерам. Вероятно, вы уже достаточно близко знакомы с этой проблемой: IE всегда требовал особого внимания, и необходимость предоставлять ему особые данные возникла задолго до появления CSS3. Тем не менее не мешает периодически освежать знания, так что в этом разделе мы обсудим различные способы удовлетворения специфических потребностей IE.

Трюки, эксплуатирующие связанные с CSS недоработки в IE, — это старейший способ выделения именно IE из обширного ассортимента браузеров, и многие разработчики применяют их по сей день. Наиболее популярные и полезные трюки для IE — star html hack (http://css-discuss.incutio.com/wiki/Star\_Html\_Hack) и underscore hack (http://wellstyled.com/css-underscore-hack.html). Удобно, что трюки добавляются прямо в основную таблицу стилей; их легко найти, если возникает необходимость внести изменения или отследить поведение определенного стиля, и они не генерируют дополнительный HTTP-запрос. Однако некоторые трюки представляют собой недопустимый код CSS, и использование их увеличивает размер файла для всех браузеров, а не только для тех, для которых они предназначены. Плюс, если только вы не выучили все трюки наизусть, невозможно быстро определить, какой браузер какое значение получает, а это затрудняет поддержку вашего кода другими разработчиками.

Из-за подобных сложностей большинство разработчиков CSS сегодня предпочитают использовать для обращения к IE условные комментарии. Условные комментарии — это особая форма комментариев HTML, прочитать которые способен только IE. Это допустимый код HTML, и он не причиняет ущерба никаким браузерам — все остальные браузеры, кроме IE, пропускают условные комментарии точно так же, как любые другие комментарии HTML. Таким образом, вы можете добавлять код HTML, который будет прочитан только IE — всеми версиями или только определенными.

Но ведь перед нами стояла задача передать IE особый код CSS, а не HTML, разве не так? Да, но условные комментарии позволяют делать и это тоже, причем несколькими способами.