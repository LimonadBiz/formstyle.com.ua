---
title: Связывает шрифты с правилами @font-face
author: admin
type: post
date: 2013-01-05T17:59:38+00:00
url: /svyazyvaet-shrifty-s-pravilami-font-face/
categories:
  - Css 3

---
Вы, вероятно, заметили, что на снимке экрана на рис. 3.27 в разделе CSS Formats (Форматы CSS) окна Font Squirrel Generator есть три варианта выбора. Они описы-

вают три вариации синтаксиса @font-face, которые можно добавлять в код CSS. Кодировать @font-face можно разными способами, получая в итоге один и тот же эффект — то же самое можно сказать и о практически любых других возможностях CSS. Все три вариации синтаксиса допустимы, соответствуют стандартам и работают в одних и тех же браузерах.

Обоснование существования трех вариаций синтаксиса слишком сложно, для того чтобы полностью приводить его здесь, и это не так уж важно. Нам подойдет любой вариант, дело лишь за личными предпочтениями. Мне больше всего нравится версия Bulletproof Smiley.

<div>
  <p>
    Если вас действительно интересуют подробности, щелкайте на голубых ссылках под названиями форматов CSS в окне Font Squirrel Generator. Все причины и обоснования приведены в трех соответствующих статьях.
  </p>
  
  <p>
    Вот как выглядит синтаксис Bulletproof Smiley для шрифта Prelude:
  </p>
  
  <p>
    @font-face {
  </p>
  
  <p>
    font-family: &#8216;Prelude&#8217;;
  </p>
  
  <p>
    src: url(&#8216;fonts/preludeflf-webfont.eot&#8217;);
  </p>
  
  <p>
    src: local(&#187;),
  </p>
  
  <p>
    url(&#8216;fonts/preludeflf-webfont.woff&#8217;) format(&#8216;woff&#8217;), url(&#8216;fonts/preludeflf-webfont.ttf&#8217;)
  </p>
  
  <p>
    &#8212;    format(&#8216;truetype&#8217;),
  </p>
  
  <p>
    url(&#8216;fonts/preludeflf-webfont.svg#webfont&#8217;)
  </p>
  
  <p>
    &#8212;    format(&#8216;svg&#8217;);
  </p>
  
  <p>
    <sup>}</sup>
  </p>
  
  <p>
    @font-face {
  </p>
  
  <p>
    font-family: &#8216;Prelude&#8217;;
  </p>
  
  <p>
    src: url(&#8216;fonts/preludeflf-bold-webfont.eot&#8217;); src: local(&#187;),
  </p>
  
  <p>
    url(&#8216;fonts/preludeflf-bold-webfont.woff&#8217;)
  </p>
  
  <p>
    &#8212;    format(&#8216;woff&#8217;),
  </p>
  
  <p>
    url(&#8216;fonts/preludeflf-bold-webfont.ttf&#8217;)
  </p>
  
  <p>
    &#8212;    format(&#8216;truetype&#8217;),
  </p>
  
  <p>
    url(&#8216;fonts/preludeflf-bold-webfont.svg#webfont&#8217;)
  </p>
  
  <p>
    &#8212;    format(&#8216;svg&#8217;); font-weight: bold;
  </p>
  
  <p>
    <sup>}</sup>
  </p>
  
  <p>
    Поместите синтаксис Bulletproof Smiley перед остальными правилами CSS. На самом деле он будет работать вне зависимости от того, в какой раздел кода вы его добавите, но, как вы узнаете чуть далее в этой главе, добавление его в самом начале таблицы стилей улучшит производительность страницы. Можете скопировать этот код из файла paper_final.html, который находится в папке с остальными файлами упражнений для этой главы.
  </p>
  
  <p>
    Эти два правила @font-face объединяют семейства шрифтов с обычным и полужирным начертанием в единое семейство; для этого мы объявляем их с одинаковым именем font-family — Prelude. Каждое правило @font-face содержит пути к файлам шрифтов (обязательный параметр) и характеристики стиля, такие как font-weight: bold или font-style: italic (необязательные параметры).
  </p>
  
  <p>
    Давайте пока что сфокусируемся на первом правиле @font-face и изучим его содержимое строка за строкой.
  </p>
  
  <div>
    <p>
      Особенности данного синтаксиса в мельчайших деталях рассматриваются в статье Пола Айриша на странице http://paulirish. com/2009/bulletproof-font-face-implementation-syntax. Их не обязательно знать для успешного применения веб-шрифтов, однако фанатам веб-технологий наверняка будет интересно ознакомиться с этой статьей.
    </p>
  </div>
  
  <p>
    &nbsp;
  </p>
  
  <p>
    В первой строке правила — font-family:
  </p>
  
  <p>
    &#8216;Prelude&#8217;; — мы присваиваем имя шрифту, ссылку на который создаем в данном правиле.
  </p>
  
  <p>
    Позже в стеке шрифтов мы будем ссылаться на этот шрифт по указанному имени. Оно может быть абсолютно любым; это всего лишь удобный и короткий способ обращения одновременно к целому набору информации о шрифте.
  </p>
  
  <p>
    Вторая строка правила — src: url(&#8216;fonts/ preludeflf-webfont.eot&#8217;); — содержит путь к EOT-версии шрифта для браузера IE версии 8 и более ранних. Путь к этой версии необходимо записывать отдельно от остальных версий шрифта, так как IE не распознает дескриптор src с несколькими значениями, разделенными запятыми. IE думает, что это один большой путь, и не может вычленить из него EOT-версию. Поэтому для того чтобы эта версия работала, ее нельзя группировать с другими файлами.
  </p>
  
  <p>
    Третья составляющая правила — второе значение src, внутри которого перечисляются все файлы шрифтов для остальных браузеров, отличных от IE. Браузеры просматривают список до тех пор, пока не обнаруживают подходящий формат. Затем они загружают этот, и только этот файл и на основе его содержимого отображают текст. Для каждого шрифта указывается путь к файлу, например url(&#8216;fonts/preludeflf-webfont.woff&#8217;), и подсказка формата, такая как format (&#8216; woff&#8217;). Подсказку добавлять необязательно, но это полезный параметр. Он сообщает браузерам, к какому формату относится каждый из файлов шрифтов. Благодаря наличию такой информации браузер загружает только один файл, тот, который он может использовать, не тратя попусту пропускную способность и не замедляя загрузку страницы.
  </p>
  
  <div>
    <p>
      Формат WOFF в списке следует первым, так как это стандарт будущего, который мы хотим видеть во всех браузерах, когда они будут готовы к этому. Кроме того, у этого формата самый маленький размер файла. Следовательно, если браузер поддерживает формат WOFF, он должен увидеть этот файл первым и загрузить именно его.
    </p>
  </div>
  
  <p>
    &nbsp;
  </p>
  
  <p>
    Вы наверняка заметили в начале второго значения src странную строку: local(&#8216;©&#8217;). Что это за смайлик и что он означает?
  </p>
  
  <p>
    Эта составляющая значения src предназначена для защиты IE. Без local(&#8216;©&#8217;) IE попытался бы прочитать второй дескриптор src как один большой путь — я уже упоминала об этом выше, — что привело бы к возникновению ошибки 404. Несмотря на то что правило @font-face все равно сработало бы как ожидается — специально для IE мы добавили в начале дополнительную ссылку на файл EOT, — это дополнительное и бессмысленное обращение к серверу, которое нам совершенно не требуется. IE не понимает синтаксис local(), и, помещая его в начале значения src, мы предотвращаем дальнейшее считывание src. Таким образом, IE не увидит значение url() и не попытается ошибочным образом разобрать путь.
  </p>
  
  <p>
    обращение к серверу
  </p>
  
  <p>
    Никакие браузеры, за исключением IE 8 и более ранних версий, не загружают файлы шрифтов до тех пор, пока запрос на этот шрифт не встретится в стеке шрифтов где-то еще в коде CSS. Таким образом, в своей таблице стилей вы можете объявить любое количество правил @font-face, однако проблемы с излишком HTTP-запросов это не создаст, если только какой-нибудь элемент на странице не запросит загрузку всех или почти всех указанных шрифтов.
  </p>
  
  <p>
    С другой стороны, IE 8 и более ранних версий загружают все файлы EOT, упоминания о которых встречаются в коде. В процессе тестирования встраивания шрифтов разработчики очень часто включают в таблицы стилей лишние правила @font-face, просто чтобы сравнить множество разнообразных шрифтов. Однако из готовой страницы необходимо удалять все ненужные правила @font-face, чтобы избежать лишней траты пропускной способности на загрузку всех перечисленных файлов EOT.
  </p>
  
  <p>
    проблемы с local()
  </p>
  
  <p>
    • в Safari может открываться диалоговое окно с запросом разрешения на использование локального шрифта — и снова, если управление шрифтами осуществляется с помощью FontExplorer X.
  </p>
  
  <p>
    Ни одну из этих проблем нельзя назвать распространенной, но если подобное произойдет, результат может быть весьма печальным. Многие эксперты по веб-шрифтам вообще не рекомендуют использовать local() либо советуют добавлять его только для того, чтобы уберечь пользователя от загрузки особенно большого файла шрифта.
  </p>
  
  <p>
    Кстати, синтаксис local() допустим и в CSS. Настоящее предназначение local() в правиле @font-face — создать ссылку на локальную версию шрифта, установленного на пользовательском компьютере. Таким образом, если у пользователя уже есть шрифт, который вы встраиваете в страницу, ему не приходится загружать дополнительный файл. Вот почему Пол Айриш, придумавший этот синтаксис, рекомендует использовать смайлик: нам не нужно, чтобы внутри local() случайно оказалась ссылка на реально существующий шрифт, но вряд ли когда-нибудь будет выпущен шрифт под названием ©.
  </p>
  
  <p>
    Во втором правиле @font-face мы объявляем версию семейства шрифтов Prelude с полужирным начертанием. Помимо путей ко всем файлам шрифтов с полужирным начертанием, там определяется стиль font-weight, и в данном случае мы указываем вариант bold. Однако название семейства (font-family) такое же, как и в первом правиле @font-face — а именно Prelude (а не PreludeBold или какая-нибудь другая вариация).
  </p>
  
  <div>
    <p>
      IE не всегда правильно понимает подобную смену стилей шрифтов в правилах @font-face. IE 8 и более ранние версии отказываются применять шрифт, когда внутри правила @font-face есть определение стиля font-style: italic. IE 9 распознает его, но он в любом случае синтезирует курсивное начертание, даже если вызываемый шрифт не курсивный.
    </p>
  </div>
  
  <p>
    &nbsp;
  </p>
  
  <p>
    Используя одно и то же название, мы сообщаем браузеру, что это всего лишь вариант шрифта из того же семейства, отличающийся начертанием.
  </p>
  
  <p>
    Таким образом, встретив на странице полужирный текст со шрифтом Prelude (начертание определяется элементом strong в коде HTML или font-weight: bold в коде CSS), браузер не будет пытаться собственными средствами сделать символы шрифта толще, он попросту воспользуется файлом шрифта с настоящими полужирными символами. Гарнитуры с настоящими полужирными или курсивными символами смотрятся лучше, чем попытка браузера имитировать подобное написание.
  </p>
</div>