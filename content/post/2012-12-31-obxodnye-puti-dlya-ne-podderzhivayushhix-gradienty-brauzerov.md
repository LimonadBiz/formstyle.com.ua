---
title: Обходные пути для не поддерживающих градиенты браузеров
author: admin
type: post
date: 2012-12-31T16:27:03+00:00
url: /obxodnye-puti-dlya-ne-podderzhivayushhix-gradienty-brauzerov/
categories:
  - Css 3

---
Код CSS из предыдущих двух разделов работает только в Safari, Chrome и Firefox версии 3.6 и более поздних, так как градиенты — это одна из возможностей CSS3 с самым низким уровнем поддержки в браузерах. Однако это также одна из тех возможностей, для которых проще всего предусмотреть замену в не поддерживающих браузерах. (Имеется в виду — на тот случай, если вы решите, что замена необходима. В большинстве случаев достаточно бывает заливки сплошным фоновым цветом.)

Нарисуйте его. Самый очевидный обходной путь для не поддерживающих градиенты браузеров — пойти по давно проторенной дорожке и создать фактическое изображение градиента в файле PNG с прозрачностью в альфа-канале. После этого в blockquote выберите данное изображение в качестве фонового и повторите несколько раз по горизонтали для заполнения всей области. Не забудьте только, что объявление этого изображения должно предшествовать двум объявлениям background-image, содержащим функции -moz-linear-gradient и -webkit-gradient. Таким образом, браузеры, поддерживающие градиенты, смогут переопределить первое свойство background-image (с изображением) вторым, создающим градиент CSS3.

Разумеется, создание и добавление на страницу изображения градиента сводит на нет преимущества генерирования градиента с помощью CSS3. Firefox 3.6 не загружает ненужные изображения, но Safari и Chrome загружают все перечисленные изображения, несмотря на то что некоторые никогда не выводятся на страницу, а градиент создается средствами CSS3. Таким образом, в Firefox 3.6 выигрыш в производительности сохраняется, но в Safari этого не происходит. Разумеется, ваши пользователи все так же могут наслаждаться остальными преимуществами градиентов CSS3, но не самым важным.

подробнее о синтаксисе линейного градиента для WEBKIT

При создании линейного градиента в синтаксисе Webkit, для того чтобы добавить между начальным и конечным цветами дополнительные цвета, вы используете такую запись: color-stop(50%, #333). Здесь символы 50% указывают, в какой точке градиента должен появиться новый цвет; также можно описать эту точку значением в диапазоне от 0 до 1. #333 — это цветовое значение, которое можно записывать в любом синтаксисе. Описания дополнительных цветов можно добавлять между начальным и конечным цветами или после них, разделяя запятыми.

Еще подробнее о синтаксисе Webkit рассказывается в этих статьях:

•    «Safari CSS Visual Effects Guide: Gradients» (http://developer.apple.com/library/ safari/#documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Gradients/ Gradients.html);

• «CSS gradient syntax: comparison of Mozilla and Webkit» автора Peter Gasston (http://www.broken-links.com/2009/11/26/css-gradient-syntax-comparison-of-mozilla-and-webkit);

•    «CSS gradient syntax: comparison of Mozilla and Webkit (Part 2)» автора Peter Gasston (http://www.broken-links.com/2009/11/30/css-gradient-syntax-comparison-of-mozilla-and-webkit-part-2).

Именно из-за падения производительности в браузерах на базе Webkit я рекомендую либо полностью отказываться от использования альтернативного фонового изображения, и пусть устаревшие браузеры отображают сплошной фон, без градиента,

либо прятать запрос на загрузку фонового изображения от тех браузеров, которым оно не требуется, применяя для этого Modernizr (подробнее об этом расширении говорится в главе 1). Если вы все же решите потратить силы и время на создание и внедрение градиентного изображения, возможно лучше реализовать этот подход единообразно во всех браузерах и полностью отказаться от градиентов CSS3. Единственно правильного ответа здесь нет, но, по моему мнению, нужно либо использовать только градиенты CSS3, либо не использовать их совсем и загружать фоновые изображения.

<div>
  <p>
    Еще один способ имитации градиента основывается на свойстве box-shadow, с помощью которого тень можно создать внутри поля. Оно поддерживается браузерами гораздо лучше, чем градиенты CSS3 (хотя, конечно, не так хорошо, как старые добрые фоновые изображения). Я подробнее расскажу о свойстве box-shadow далее в этой главе.
  </p>
</div>

&nbsp;

Используйте сценарий. Для браузеров IE версий с 6 по 8 можно применить сценарий PIE (http://css3pie.com/documentation/supported-css3-features). Для многих других браузеров подойдет сценарий css-gradients-via-canvas автора Weston Ruter (http://weston.ruter.net/projects/css-gradients-via-canvas). Он работает в тех браузерах, которые поддерживают элемент HTML5 canvas, поэтому подходит для Firefox

2 и 3, а также Opera 9.64 и более поздних версий. Он не работает в IE, но его можно использовать в сочетании с фильтром Gradient для IE. Это подводит нас к следующему альтернативному варианту&#8230;

Меняйте цветовые значения для достижения нужного эффекта. Мы уже применяли фильтр IE Gradient для создания одноцветного полупрозрачного фона в правиле blockquote. Давайте поменяем начальные значения цвета — сделаем его чуть светлее, для того чтобы создать впечатление градиента на основе CSS3.

В обоих правилах IE в фильтре Gradient смените начальный цвет #99A6DADC на #99E3F4EE:

.ie6 blockquote, .ie7 blockquote { background: none;

filter: progid:DXImageTransform.Microsoft.gradient

(startColorstr=#99E3F4EE, endColorstr=#99A6DADC); zoom: 1;

<sup>}</sup>

.ie8 blockquote {

-ms-filter: &#171;progid:DXImageTransform.Microsoft.gradient (startColorstr=#99E3F4EE, endColorstr=#99A6DADC)&#187;;

<sup>}</sup>

В IE направление градиента по умолчанию — сверху вниз, поэтому получившийся градиент выглядит почти так же, как предыдущие, в Firefox и браузерах на базе Webkit (рис. 2.20). В отличие от градиентов CSS3, в IE невозможно настраивать точки добавления новых цветов, однако с помощью фильтра можно с успехом создавать простые двухцветные линейные градиенты. Данная техника работает только в IE 8 и более ранних версиях; IE 9 не поддерживает фильтры Microsoft. Таким образом, в IE 9 градиенты не отображаются, но, по крайней мере, вы увидите полупрозрачный фоновый цвет.

<div>
  <p>
    Подробнее о фильтре IE Gradient рассказывается в статье http://msdn.microsoft.com/en-us/library/ ms532997(VS.85).aspx
  </p>
  
  <p>
    <a href="http://formstyle.com.ua/?attachment_id=1581" rel="attachment wp-att-1581"><img class="aligncenter size-full wp-image-1581" alt="Фильтр IE Gradient способен имитировать простейшие градиенты CSS3" src="http://formstyle.com.ua/wp-content/uploads/2012/12/Фильтр-IE-Gradient-способен-имитировать-простейшие-градиенты-CSS3.png" width="352" height="183" srcset="http://formstyle.com.ua/wp-content/uploads/2012/12/Фильтр-IE-Gradient-способен-имитировать-простейшие-градиенты-CSS3.png 352w, http://formstyle.com.ua/wp-content/uploads/2012/12/Фильтр-IE-Gradient-способен-имитировать-простейшие-градиенты-CSS3-300x155.png 300w" sizes="(max-width: 352px) 100vw, 352px" /></a>
  </p>
  
  <p>
    Фильтр IE Gradient способен имитировать простейшие градиенты CSS3 (снимок экрана сделан в версии IE 8)
  </p>
  
  <div>
    <p>
      Файл со всеми внесенными до этого момента изменениями называется speech-bubble_2.html. Он находится в той же папке, где и остальные файлы упражнений для этой главы.
    </p>
  </div>
  
  <p>
    &nbsp;
  </p>
  
  <div>
    <p>
      Обратите внимание, что если в коде CSS вы объявили фоновое изображение, которое будет использоваться в качестве замены в не поддерживающих градиенты браузерах, то в IE 8 оно переопределит фильтр Gradient. Правило для IE 7 и более ранних версий удаляет любые фоновые изображения, но в правиле для IE 8
    </p>
  </div>
  
  <p>
    &nbsp;
  </p>
  
  <p>
    соответствующая команда отсутствует. Если в главное правило blockquote добавляется фоновое изображение (например, в качестве альтернативы градиенту), то не забудьте вставить строку background: none; в правило для IE 8.
  </p>
</div>